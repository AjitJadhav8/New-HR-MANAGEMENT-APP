<h2>Candidate Management</h2>

<label>Logged-in HR: {{ loggedInHR }}</label>

<button type="button" (click)="resetForm()">Reset</button>

<form (ngSubmit)="addOrUpdateCandidate()" #candidateForm="ngForm" style="margin-top: 20px;">
  <div style="display: flex; flex-wrap: wrap; gap: 20px;">
    <div style="display: flex; flex-direction: column; flex: 1 0 20%;">
      <label>Name:</label>
      <input [(ngModel)]="candidate.name" name="name" required placeholder="Enter candidate name">
    </div>

    <div style="display: flex; flex-direction: column; flex: 1 0 20%;">
      <label>Position:</label>
      <input [(ngModel)]="candidate.position" name="position" required placeholder="Enter position">
    </div>

    <div style="display: flex; flex-direction: column; flex: 1 0 20%;">
      <label>Round Number:</label>
      <input type="number" [(ngModel)]="candidate.round_number" name="round_number" required placeholder="Enter round number">
    </div>

    <div style="display: flex; flex-direction: column; flex: 1 0 20%;">
      <label>Interviewer:</label>
      <input [(ngModel)]="candidate.interviewer" name="interviewer" required placeholder="Enter interviewer name">
    </div>

    <div style="display: flex; flex-direction: column; flex: 1 0 20%;">
      <label>Interview Date:</label>
      <input type="date" [(ngModel)]="candidate.interview_date" name="interview_date" required>
    </div>

    <div style="display: flex; flex-direction: column; flex: 1 0 20%;">
      <label>Status:</label>
      <input 
        [(ngModel)]="candidate.status" 
        name="status" 
        required 
        placeholder="Enter status"
      />
    </div>

    <div style="display: flex; flex-direction: column; flex: 1 0 20%;">
      <label>Remarks:</label>
      <textarea [(ngModel)]="candidate.remarks" name="remarks" placeholder="Enter remarks"></textarea>
    </div>

    <button type="submit" style="flex: 1 0 20%; margin-top: 10px;">
      {{ selectedCandidate ? 'Save with Updated Round' : 'Save Candidate' }}
    </button>
  </div>
</form>

<h3>Candidate List</h3>
<table border="1" style="width: 100%; margin-top: 20px; border-collapse: collapse;">
  <thead>
    <tr>
      <th>Name</th>
      <th>Position</th>
      <th>Round Number</th>
      <th>Interviewer</th>
      <th>Interview Date</th>
      <th>Status</th>
      <th>Remarks</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let candidate of candidates">
      <td>{{ candidate.Candidate_Name }}</td>
      <td>{{ candidate.Position }}</td>
      <td>{{ candidate.Round_Number }}</td>
      <td>{{ candidate.Interviewer }}</td>
      <td>{{ candidate.Interview_Date | date:'shortDate' }}</td>
      <td>{{ candidate.Status }}</td>
      <td>{{ candidate.Remarks }}</td>
      <td>
        <button type="button" (click)="selectCandidate(candidate)">Select</button>
        <button type="button" (click)="deleteCandidate(candidate.Candidate_ID)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>
